{
  "version": 3,
  "sources": ["../src/ui/setUrlParam.ts", "../src/ui/shared-styles.module.css", "../src/ui/UIElement.ts", "../src/ui/UIField.module.css", "../src/ui/UIField.ts", "../src/ui/UIGroup.module.css", "../src/ui/UIGroup.ts", "../src/FormIteration.ts", "../src/PlayCanvasMode.ts", "../src/QueryParamState.ts", "../src/TagsMode.ts", "../src/ThreeJSMode.ts", "../src/ui/HideUISection.module.css", "../src/ui/tooltip.module.css", "../src/ui/HideUISection.ts", "../src/ui/UnusedParameters.module.css", "../src/ui/UnusedParameters.ts", "../src/ui/ViewerUI.module.css", "../src/ui/ViewerUI.ts", "../src/StandaloneViewer.ts", "../src/index.ts"],
  "sourcesContent": ["export function setUrlParam(name: string, value: string | null) {\n  const params = new URLSearchParams(window.location.search);\n  if (value === \"\" || value === null) {\n    params.delete(name);\n  } else {\n    params.set(name, value);\n  }\n  window.history.replaceState({}, \"\", `${window.location.pathname}?${params}`);\n  window.dispatchEvent(new PopStateEvent(\"popstate\"));\n}\n", "import \"esbuild-css-modules-plugin-ns-css:src/ui/shared-styles.module.css\";\n\nexport default {\n  \"button\": \"shared-styles-module__button_Y_AOrq__0197\",\n  \"header\": \"shared-styles-module__header_Y_AOrq__0197\"\n};\n      ", "export class UIElement {\n  public readonly element = document.createElement(\"div\");\n\n  dispose() {}\n}\n", "import \"esbuild-css-modules-plugin-ns-css:src/ui/UIField.module.css\";\n\nexport default {\n  \"label\": \"UIField-module__label_lh-KDa__0197\",\n  \"labelFocused\": \"UIField-module__label-focused_lh-KDa__0197\",\n  \"selectInput\": \"UIField-module__select-input_lh-KDa__0197\",\n  \"submitButton\": \"UIField-module__submit-button_lh-KDa__0197\",\n  \"textInput\": \"UIField-module__text-input_lh-KDa__0197\",\n  \"uiField\": \"UIField-module__ui-field_lh-KDa__0197\"\n};\n      ", "import { FieldDefinition } from \"./FieldDefinition\";\nimport { setUrlParam } from \"./setUrlParam\";\nimport sharedStyles from \"./shared-styles.module.css\";\nimport { UIElement } from \"./UIElement\";\nimport styles from \"./UIField.module.css\";\nimport { UIGroup } from \"./UIGroup\";\n\nexport class UIField extends UIElement {\n  private label: HTMLLabelElement;\n  private input?: HTMLInputElement;\n\n  private selectElement?: HTMLSelectElement;\n\n  private submitButton?: HTMLButtonElement;\n\n  constructor(\n    public fieldDefinition: FieldDefinition,\n    public readonly group: UIGroup,\n  ) {\n    super();\n    this.element.className = styles.uiField;\n\n    this.label = document.createElement(\"label\");\n    this.label.className = styles.label;\n    this.label.textContent = fieldDefinition.label;\n    this.element.append(this.label);\n\n    if (fieldDefinition.options) {\n      const selectElement = document.createElement(\"select\");\n      this.selectElement = selectElement;\n      this.selectElement.className = styles.selectInput;\n\n      const unsetOption = document.createElement(\"option\");\n      unsetOption.textContent = \"Unset (default: \" + fieldDefinition.defaultValue + \")\";\n      unsetOption.value = \"\";\n      this.selectElement.append(unsetOption);\n      this.element.append(this.selectElement);\n\n      for (const option of fieldDefinition.options) {\n        const optionElement = document.createElement(\"option\");\n        optionElement.textContent = option;\n        this.selectElement.append(optionElement);\n      }\n\n      if (fieldDefinition.requireSubmission) {\n        this.submitButton = document.createElement(\"button\");\n        this.submitButton.classList.add(sharedStyles.button, styles.submitButton);\n        this.submitButton.textContent = \"Submit\";\n        this.submitButton.addEventListener(\"click\", () => {\n          this.onChange(selectElement.value);\n        });\n        this.element.append(this.submitButton);\n      } else {\n        this.selectElement.addEventListener(\"change\", () => {\n          this.onChange(selectElement.value);\n        });\n      }\n    } else {\n      const input = document.createElement(\"input\");\n      this.input = input;\n      this.input.className = styles.textInput;\n      this.input.placeholder = `Default: ${fieldDefinition.defaultValue.toString()}`;\n      this.input.addEventListener(\"focus\", () => {\n        this.label.classList.add(styles.labelFocused);\n      });\n      this.input.addEventListener(\"blur\", () => {\n        this.label.classList.remove(styles.labelFocused);\n      });\n      this.input.addEventListener(\"keydown\", (event) => {\n        if (event.key === \"Enter\") {\n          this.onChange(input.value);\n        }\n      });\n      if (fieldDefinition.type === \"number\") {\n        this.input.step = \"0.01\";\n        this.input.type = \"number\";\n      } else if (fieldDefinition.type === \"color\") {\n        this.input.type = \"text\";\n      } else {\n        this.input.type = \"text\";\n      }\n      this.element.append(this.input);\n\n      if (fieldDefinition.requireSubmission) {\n        this.submitButton = document.createElement(\"button\");\n        this.submitButton.classList.add(sharedStyles.button, styles.submitButton);\n        this.submitButton.textContent = \"Submit\";\n        this.submitButton.addEventListener(\"click\", () => {\n          if (this.input) {\n            this.onChange(this.input.value);\n          } else if (this.selectElement) {\n            this.onChange(this.selectElement.value);\n          }\n        });\n        this.element.append(this.submitButton);\n      } else {\n        if (this.input) {\n          const input = this.input;\n          this.input.addEventListener(\"input\", () => {\n            this.onChange(input.value);\n          });\n        } else if (this.selectElement) {\n          const selectElement = this.selectElement;\n          this.selectElement.addEventListener(\"change\", () => {\n            this.onChange(selectElement.value);\n          });\n        }\n      }\n    }\n\n    const params = new URLSearchParams(window.location.search);\n    const value = params.get(fieldDefinition.name);\n    if (value) {\n      this.setValue(value);\n    }\n  }\n\n  setValue(value: string) {\n    if (this.selectElement) {\n      this.selectElement.value = value;\n    } else if (this.input) {\n      this.input.value = value;\n    }\n  }\n\n  onChange(value: string) {\n    setUrlParam(this.fieldDefinition.name, value);\n  }\n}\n", "import \"esbuild-css-modules-plugin-ns-css:src/ui/UIGroup.module.css\";\n\nexport default {\n  \"uiGroup\": \"UIGroup-module__ui-group_WUqfdq__0197\"\n};\n      ", "import { GroupDefinition } from \"./FieldDefinition\";\nimport { allFields } from \"./fields\";\nimport sharedStyles from \"./shared-styles.module.css\";\nimport { UIElement } from \"./UIElement\";\nimport { UIField } from \"./UIField\";\nimport styles from \"./UIGroup.module.css\";\n\nexport class UIGroup extends UIElement {\n  private header: HTMLDivElement;\n  private contents: HTMLDivElement;\n\n  constructor(public readonly groupDefinition: GroupDefinition) {\n    super();\n    this.element.className = styles.uiGroup;\n    this.header = document.createElement(\"div\");\n    this.header.className = sharedStyles.header;\n    this.header.textContent = groupDefinition.label;\n    this.element.append(this.header);\n\n    this.contents = document.createElement(\"div\");\n    this.contents.className = styles.contents;\n    this.element.append(this.contents);\n  }\n\n  private fields: Array<UIField> = new Array<UIField>();\n\n  addField(uiField: UIField) {\n    if (this.fields.includes(uiField)) {\n      return;\n    }\n\n    this.fields.push(uiField);\n    this.fields.sort(\n      (a, b) => allFields.indexOf(a.fieldDefinition) - allFields.indexOf(b.fieldDefinition),\n    );\n    const index = this.fields.indexOf(uiField);\n    if (index === this.fields.length - 1) {\n      this.contents.append(uiField.element);\n    } else {\n      const nextGroup = this.fields[index + 1];\n      this.contents.insertBefore(uiField.element, nextGroup.element);\n    }\n  }\n\n  removeField(uiField: UIField) {\n    this.fields = this.fields.filter((f) => f !== uiField);\n    this.contents.removeChild(uiField.element);\n  }\n\n  dispose() {\n    for (const element of this.fields) {\n      element.dispose();\n    }\n    this.fields = [];\n  }\n\n  isEmpty() {\n    return this.fields.length === 0;\n  }\n}\n", "import { QueryParamState } from \"./QueryParamState\";\nimport { FieldDefinition, GroupDefinition } from \"./ui/FieldDefinition\";\nimport { UIField } from \"./ui/UIField\";\nimport { UIGroup } from \"./ui/UIGroup\";\nimport { ViewerUI } from \"./ui/ViewerUI\";\n\nexport class FormIteration {\n  private unmatchedFields = new Map<FieldDefinition, UIField>();\n\n  private fields = new Map<FieldDefinition, UIField>();\n  private groups = new Map<GroupDefinition, UIGroup>();\n\n  constructor(\n    private queryParamState: QueryParamState,\n    private viewerUI: ViewerUI,\n    previousFormIteration: FormIteration | null,\n  ) {\n    if (previousFormIteration) {\n      this.unmatchedFields = new Map(previousFormIteration.fields);\n      this.fields = new Map(previousFormIteration.fields);\n    }\n  }\n\n  getFieldValue(fieldDefinition: FieldDefinition): string {\n    const unmatchedField = this.unmatchedFields.get(fieldDefinition);\n    if (unmatchedField) {\n      const uiGroup = unmatchedField.group;\n      this.groups.set(uiGroup.groupDefinition, uiGroup);\n      this.unmatchedFields // We've used this existing field. Mark it as matched.\n        .delete(fieldDefinition);\n    }\n    let field = this.fields.get(fieldDefinition);\n    if (!field) {\n      const groupDefinition = fieldDefinition.groupDefinition;\n      let uiGroup = this.groups.get(groupDefinition);\n      if (!uiGroup) {\n        uiGroup = new UIGroup(groupDefinition);\n        this.groups.set(groupDefinition, uiGroup);\n        this.viewerUI.addGroup(uiGroup);\n      }\n      field = new UIField(fieldDefinition, uiGroup);\n      uiGroup.addField(field);\n      this.fields.set(fieldDefinition, field);\n    }\n\n    const readValue = this.queryParamState.read(fieldDefinition.name);\n    if (readValue !== null) {\n      field.setValue(readValue);\n      return readValue;\n    }\n    return fieldDefinition.defaultValue.toString();\n  }\n\n  private clearUnmatchedFields() {\n    for (const field of this.unmatchedFields.values()) {\n      const group = field.group;\n      group.removeField(field);\n      field.dispose();\n      if (group.isEmpty()) {\n        group.dispose();\n        this.viewerUI.removeGroup(group);\n        this.groups.delete(group.groupDefinition);\n      }\n      this.fields.delete(field.fieldDefinition);\n    }\n    this.unmatchedFields.clear();\n  }\n\n  completed() {\n    this.clearUnmatchedFields();\n    this.viewerUI.showUnusedParams(Array.from(this.queryParamState.getUnusedParams()));\n  }\n}\n", "import { FormIteration } from \"./FormIteration\";\nimport { GraphicsMode } from \"./GraphicsMode\";\nimport { MMLSourceDefinition } from \"./MMLSourceDefinition\";\n\nexport class PlayCanvasMode implements GraphicsMode {\n  private disposed = false;\n  private internalMode: GraphicsMode | null = null;\n\n  public readonly type = \"playcanvas\";\n\n  constructor(\n    private windowTarget: Window,\n    private targetForWrappers: HTMLElement,\n    private mmlSource: MMLSourceDefinition,\n    private formIteration: FormIteration,\n  ) {\n    this.init();\n  }\n\n  private async init() {\n    this.internalMode = await (async () => {\n      const { PlayCanvasModeInternal } = await import(\"./PlayCanvasModeInternal\");\n      return new PlayCanvasModeInternal(\n        this.windowTarget,\n        this.targetForWrappers,\n        this.mmlSource,\n        this.formIteration,\n      );\n    })();\n    if (this.disposed) {\n      this.dispose();\n      return;\n    }\n  }\n\n  dispose() {\n    this.disposed = true;\n    if (this.internalMode) {\n      this.internalMode.dispose();\n    }\n  }\n\n  update(formIteration: FormIteration) {\n    this.formIteration = formIteration;\n    if (!this.internalMode) {\n      return;\n    }\n    this.internalMode.update(formIteration);\n  }\n}\n", "export class QueryParamState {\n  private params: Map<string, string> = new Map();\n  private usedParams: Set<string> = new Set();\n\n  constructor(arg: string | Map<string, string> = new Map()) {\n    if (typeof arg === \"string\") {\n      this.params = new Map(new URLSearchParams(arg));\n    } else {\n      this.params = new Map(arg);\n    }\n  }\n\n  public cloneWithAdditionalParams(params: Map<string, string>): QueryParamState {\n    const newParams = new Map(this.params);\n    params.forEach((value, key) => {\n      newParams.set(key, value);\n    });\n    return new QueryParamState(newParams);\n  }\n\n  public read(key: string): string | null {\n    this.usedParams.add(key);\n    return this.params.get(key) ?? null;\n  }\n\n  public getUnusedParams(): Set<string> {\n    const unusedParams = new Set(this.params.keys());\n    this.usedParams.forEach((key) => {\n      unusedParams.delete(key);\n    });\n    return unusedParams;\n  }\n\n  public toString(): string {\n    const searchParams = new URLSearchParams();\n    this.params.forEach((value, key) => {\n      searchParams.set(key, value);\n    });\n    return searchParams.toString();\n  }\n}\n", "import {\n  FullScreenMMLScene,\n  MMLNetworkSource,\n  NetworkedDOMWebsocketStatus,\n  NetworkedDOMWebsocketStatusToString,\n  StandaloneTagDebugAdapter,\n  StatusUI,\n} from \"@mml-io/mml-web\";\n\nimport { FormIteration } from \"./FormIteration\";\nimport { GraphicsMode } from \"./GraphicsMode\";\nimport { MMLSourceDefinition } from \"./MMLSourceDefinition\";\nimport { setDebugGlobals } from \"./setDebugGlobals\";\n\nexport class TagsMode implements GraphicsMode {\n  private disposed = false;\n\n  private loadedState: {\n    mmlNetworkSource: MMLNetworkSource;\n    graphicsAdapter: StandaloneTagDebugAdapter;\n    fullScreenMMLScene: FullScreenMMLScene<StandaloneTagDebugAdapter>;\n    statusUI: StatusUI;\n  } | null = null;\n\n  constructor(\n    private windowTarget: Window,\n    private targetForWrappers: HTMLElement,\n    private mmlSourceDefinition: MMLSourceDefinition,\n    private formIteration: FormIteration,\n  ) {\n    this.init();\n  }\n\n  public readonly type = \"tags\";\n\n  private async init() {\n    const fullScreenMMLScene = new FullScreenMMLScene<StandaloneTagDebugAdapter>();\n    document.body.append(fullScreenMMLScene.element);\n    const graphicsAdapter = await StandaloneTagDebugAdapter.create(fullScreenMMLScene.element);\n    if (this.disposed) {\n      graphicsAdapter.dispose();\n      return;\n    }\n\n    fullScreenMMLScene.init(graphicsAdapter);\n    const statusUI = new StatusUI();\n    const mmlNetworkSource = MMLNetworkSource.create({\n      mmlScene: fullScreenMMLScene,\n      statusUpdated: (status: NetworkedDOMWebsocketStatus) => {\n        if (status === NetworkedDOMWebsocketStatus.Connected) {\n          statusUI.setNoStatus();\n        } else {\n          statusUI.setStatus(NetworkedDOMWebsocketStatusToString(status));\n        }\n      },\n      url: this.mmlSourceDefinition.url,\n      windowTarget: this.windowTarget,\n      targetForWrappers: this.targetForWrappers,\n    });\n    setDebugGlobals({\n      mmlScene: fullScreenMMLScene,\n      remoteDocumentWrapper: mmlNetworkSource.remoteDocumentWrapper,\n    });\n    this.loadedState = {\n      mmlNetworkSource,\n      graphicsAdapter,\n      fullScreenMMLScene,\n      statusUI,\n    };\n    this.update(this.formIteration);\n  }\n\n  public dispose() {\n    this.disposed = true;\n    if (this.loadedState) {\n      this.loadedState.mmlNetworkSource.dispose();\n      this.loadedState.graphicsAdapter.dispose();\n      this.loadedState.fullScreenMMLScene.dispose();\n      this.loadedState.statusUI.dispose();\n      this.loadedState = null;\n    }\n  }\n\n  update(formIteration: FormIteration) {\n    formIteration.completed();\n  }\n}\n", "import { FormIteration } from \"./FormIteration\";\nimport { GraphicsMode } from \"./GraphicsMode\";\nimport { MMLSourceDefinition } from \"./MMLSourceDefinition\";\n\nexport class ThreeJSMode implements GraphicsMode {\n  private disposed = false;\n  private internalMode: GraphicsMode | null = null;\n\n  public readonly type = \"threejs\";\n\n  constructor(\n    private windowTarget: Window,\n    private targetForWrappers: HTMLElement,\n    private mmlSource: MMLSourceDefinition,\n    private formIteration: FormIteration,\n  ) {\n    this.init();\n  }\n\n  private async init() {\n    this.internalMode = await (async () => {\n      const { ThreeJSModeInternal } = await import(\"./ThreeJSModeInternal\");\n      return new ThreeJSModeInternal(\n        this.windowTarget,\n        this.targetForWrappers,\n        this.mmlSource,\n        this.formIteration,\n      );\n    })();\n    if (this.disposed) {\n      this.dispose();\n      return;\n    }\n  }\n\n  public dispose() {\n    this.disposed = true;\n    if (this.internalMode) {\n      this.internalMode.dispose();\n    }\n  }\n\n  update(formIteration: FormIteration) {\n    this.formIteration = formIteration;\n    if (!this.internalMode) {\n      return;\n    }\n    this.internalMode.update(formIteration);\n  }\n}\n", "import \"esbuild-css-modules-plugin-ns-css:src/ui/HideUISection.module.css\";\n\nexport default {\n  \"hidden\": \"HideUISection-module__hidden_ygtI5G__0197\",\n  \"hideUiSection\": \"HideUISection-module__hide-ui-section_ygtI5G__0197\",\n  \"hideUiSectionContents\": \"HideUISection-module__hide-ui-section-contents_ygtI5G__0197\"\n};\n      ", "import \"esbuild-css-modules-plugin-ns-css:src/ui/tooltip.module.css\";\n\nexport default {\n  \"tooltip\": \"tooltip-module__tooltip_qonKzG__0197\",\n  \"tooltipInitiator\": \"tooltip-module__tooltip-initiator_qonKzG__0197\",\n  \"tooltipItem\": \"tooltip-module__tooltip-item_qonKzG__0197\"\n};\n      ", "import styles from \"./HideUISection.module.css\";\nimport { setUrlParam } from \"./setUrlParam\";\nimport sharedStyles from \"./shared-styles.module.css\";\nimport tooltipStyles from \"./tooltip.module.css\";\n\nexport class HideUISection {\n  public readonly element: HTMLDivElement;\n  private hideUiButton: HTMLButtonElement;\n  private hideUiHeader: HTMLDivElement;\n  private hideUiSectionContents: HTMLDivElement;\n\n  constructor() {\n    this.element = document.createElement(\"div\");\n    this.element.className = styles.hideUiSection;\n\n    this.hideUiHeader = document.createElement(\"div\");\n    this.hideUiHeader.textContent = \"Hide UI\";\n    this.hideUiHeader.className = sharedStyles.header;\n    this.element.append(this.hideUiHeader);\n\n    this.hideUiSectionContents = document.createElement(\"div\");\n    this.hideUiSectionContents.className = styles.hideUiSectionContents;\n    this.element.append(this.hideUiSectionContents);\n\n    this.hideUiButton = document.createElement(\"button\");\n    this.hideUiButton.className = sharedStyles.button;\n    this.hideUiButton.textContent = \"Hide UI\";\n    this.hideUiButton.addEventListener(\"click\", () => {\n      setUrlParam(\"noUI\", \"true\");\n    });\n    this.hideUiSectionContents.append(this.hideUiButton);\n\n    const warningIcon = document.createElement(\"span\");\n    warningIcon.className = tooltipStyles.tooltip;\n    warningIcon.setAttribute(\"data-direction\", \"left\");\n    const warningIconText = document.createElement(\"span\");\n    warningIconText.className = tooltipStyles.tooltipInitiator;\n    warningIconText.textContent = \"\u26A0\uFE0F\";\n    warningIcon.append(warningIconText);\n    const warningTooltip = document.createElement(\"span\");\n    warningTooltip.className = tooltipStyles.tooltipItem;\n    warningTooltip.textContent =\n      \"If you hide the UI, it can only be shown again by removing the noUI parameter from the URL\";\n    warningIcon.append(warningTooltip);\n    this.hideUiSectionContents.append(warningIcon);\n  }\n\n  show() {\n    this.element.classList.remove(styles.hidden);\n  }\n\n  hide() {\n    this.element.classList.add(styles.hidden);\n  }\n}\n", "import \"esbuild-css-modules-plugin-ns-css:src/ui/UnusedParameters.module.css\";\n\nexport default {\n  \"header\": \"UnusedParameters-module__header_BZL2TW__0197\",\n  \"hidden\": \"UnusedParameters-module__hidden_BZL2TW__0197\",\n  \"paramListItem\": \"UnusedParameters-module__param-list-item_BZL2TW__0197\",\n  \"unusedParameters\": \"UnusedParameters-module__unused-parameters_BZL2TW__0197\"\n};\n      ", "import { setUrlParam } from \"./setUrlParam\";\nimport sharedStyles from \"./shared-styles.module.css\";\nimport tooltipStyles from \"./tooltip.module.css\";\nimport styles from \"./UnusedParameters.module.css\";\n\nexport class UnusedParameters {\n  public readonly element: HTMLDivElement;\n  private header: HTMLDivElement;\n  private paramsHolder: HTMLDivElement;\n\n  constructor() {\n    this.element = document.createElement(\"div\");\n    this.element.classList.add(styles.unusedParameters, styles.hidden);\n\n    this.header = document.createElement(\"div\");\n    this.header.textContent = \"Unused Parameters\";\n    this.header.className = sharedStyles.header;\n    this.element.append(this.header);\n\n    const warningIcon = document.createElement(\"span\");\n    warningIcon.className = tooltipStyles.tooltip;\n    warningIcon.setAttribute(\"data-direction\", \"left\");\n    const warningIconText = document.createElement(\"span\");\n    warningIconText.className = tooltipStyles.tooltipInitiator;\n    warningIconText.textContent = \"\u26A0\uFE0F\";\n    warningIcon.append(warningIconText);\n    const warningTooltip = document.createElement(\"span\");\n    warningTooltip.className = tooltipStyles.tooltipItem;\n    warningTooltip.textContent = \"These parameters are not used by the viewer in the current mode\";\n    warningIcon.append(warningTooltip);\n    this.header.append(warningIcon);\n\n    this.paramsHolder = document.createElement(\"div\");\n    this.element.append(this.paramsHolder);\n  }\n\n  setParams(params: string[]) {\n    this.paramsHolder.innerHTML = \"\";\n    if (params.length === 0) {\n      this.element.classList.add(styles.hidden);\n      return;\n    }\n\n    this.element.classList.remove(styles.hidden);\n\n    for (const param of params) {\n      const listItem = document.createElement(\"div\");\n      listItem.className = styles.paramListItem;\n      const paramName = document.createElement(\"div\");\n      paramName.textContent = param;\n      listItem.append(paramName);\n      const removeButton = document.createElement(\"button\");\n      removeButton.className = sharedStyles.button;\n      removeButton.textContent = \"Remove\";\n      removeButton.addEventListener(\"click\", () => {\n        setUrlParam(param, null);\n      });\n      listItem.append(removeButton);\n      this.paramsHolder.append(listItem);\n    }\n  }\n}\n", "import \"esbuild-css-modules-plugin-ns-css:src/ui/ViewerUI.module.css\";\n\nexport default {\n  \"contents\": \"ViewerUI-module__contents_ne7v1W__0197\",\n  \"emptyState\": \"ViewerUI-module__empty-state_ne7v1W__0197\",\n  \"githubLink\": \"ViewerUI-module__github-link_ne7v1W__0197\",\n  \"githubLogo\": \"ViewerUI-module__github-logo_ne7v1W__0197\",\n  \"header\": \"ViewerUI-module__header_ne7v1W__0197\",\n  \"logo\": \"ViewerUI-module__logo_ne7v1W__0197\",\n  \"menuButton\": \"ViewerUI-module__menu-button_ne7v1W__0197\",\n  \"title\": \"ViewerUI-module__title_ne7v1W__0197\",\n  \"viewerUi\": \"ViewerUI-module__viewer-ui_ne7v1W__0197\"\n};\n      ", "import MMLLogoSVG from \"../../../../branding/src/svg/logotype/mml-logotype-white.svg\";\nimport { allGroups } from \"./fields\";\nimport GitHubLogoSVG from \"./github-mark-white.svg\";\nimport { HideUISection } from \"./HideUISection\";\nimport { UIGroup } from \"./UIGroup\";\nimport { UnusedParameters } from \"./UnusedParameters\";\nimport styles from \"./ViewerUI.module.css\";\n\nexport class ViewerUI {\n  private element: HTMLDivElement;\n  private contents: HTMLDivElement;\n\n  private header: HTMLDivElement;\n  private groups: Array<UIGroup> = [];\n  private groupHolder: HTMLDivElement;\n\n  private unusedParameters: UnusedParameters;\n  private hideUISection: HideUISection;\n\n  constructor() {\n    this.element = document.createElement(\"div\");\n    this.element.className = styles.viewerUi;\n    this.element.addEventListener(\"wheel\", (e) => e.stopPropagation());\n    document.body.append(this.element);\n\n    this.contents = document.createElement(\"div\");\n    this.contents.className = styles.contents;\n    this.contents.style.display = \"none\";\n    this.element.append(this.contents);\n\n    this.header = document.createElement(\"div\");\n    this.header.className = styles.header;\n\n    const title = document.createElement(\"div\");\n    title.className = styles.title;\n    const logoLink = document.createElement(\"a\");\n    logoLink.target = \"_blank\";\n    logoLink.href = \"https://mml.io\";\n    const logo = document.createElement(\"img\");\n    logo.classList.add(styles.logo);\n    logo.src = MMLLogoSVG;\n    logo.alt = \"MML\";\n    logoLink.append(logo);\n    title.append(logoLink);\n    const span = document.createElement(\"span\");\n    span.textContent = \" Viewer (Alpha)\";\n    title.append(span);\n    this.header.append(title);\n\n    const githubLink = document.createElement(\"a\");\n    githubLink.target = \"_blank\";\n    githubLink.className = styles.githubLink;\n    githubLink.href = \"https://github.com/mml-io/mml/tree/main/packages/mml-viewer\";\n    const githubLogo = document.createElement(\"img\");\n    githubLogo.classList.add(styles.githubLogo);\n    githubLogo.src = GitHubLogoSVG;\n    githubLogo.alt = \"GitHub\";\n    githubLink.append(githubLogo);\n    const githubSpan = document.createElement(\"span\");\n    githubSpan.textContent = \"View Source\";\n    githubLink.append(githubSpan);\n    this.header.append(githubLink);\n\n    this.contents.append(this.header);\n\n    this.groupHolder = document.createElement(\"div\");\n    this.contents.append(this.groupHolder);\n\n    this.unusedParameters = new UnusedParameters();\n    this.contents.append(this.unusedParameters.element);\n\n    this.hideUISection = new HideUISection();\n    this.contents.append(this.hideUISection.element);\n\n    const menuIcon = document.createElement(\"button\");\n    menuIcon.classList.add(styles.menuButton, \"no-copy\");\n    menuIcon.textContent = \"\u2261\";\n    menuIcon.addEventListener(\"click\", () => {\n      this.contents.style.display = this.contents.style.display === \"none\" ? \"block\" : \"none\";\n    });\n    this.element.append(menuIcon);\n  }\n\n  addGroup(uiGroup: UIGroup) {\n    this.groups.push(uiGroup);\n    this.groups.sort(\n      (a, b) => allGroups.indexOf(a.groupDefinition) - allGroups.indexOf(b.groupDefinition),\n    );\n    const index = this.groups.indexOf(uiGroup);\n    if (index === this.groups.length - 1) {\n      this.groupHolder.append(uiGroup.element);\n    } else {\n      const nextGroup = this.groups[index + 1];\n      this.groupHolder.insertBefore(uiGroup.element, nextGroup.element);\n    }\n  }\n\n  showUnusedParams(params: string[]) {\n    this.unusedParameters.setParams(params);\n  }\n\n  showAddressMenu() {\n    this.element.classList.add(styles.emptyState);\n    this.contents.style.display = \"block\";\n    this.hideUISection.hide();\n  }\n\n  hideAddressMenu() {\n    this.element.classList.remove(styles.emptyState);\n    this.hideUISection.show();\n  }\n\n  removeGroup(group: UIGroup) {\n    this.groupHolder.removeChild(group.element);\n    this.groups = this.groups.filter((g) => g !== group);\n  }\n\n  show() {\n    this.element.style.display = \"block\";\n  }\n\n  hide() {\n    this.element.style.display = \"none\";\n  }\n}\n", "import { parseBoolAttribute } from \"@mml-io/mml-web\";\n\nimport { FormIteration } from \"./FormIteration\";\nimport { GraphicsMode } from \"./GraphicsMode\";\nimport { MMLSourceDefinition } from \"./MMLSourceDefinition\";\nimport { PlayCanvasMode } from \"./PlayCanvasMode\";\nimport { QueryParamState } from \"./QueryParamState\";\nimport { TagsMode } from \"./TagsMode\";\nimport { ThreeJSMode } from \"./ThreeJSMode\";\nimport { rendererField, urlField } from \"./ui/fields\";\nimport { ViewerUI } from \"./ui/ViewerUI\";\n\nexport class StandaloneViewer {\n  private viewerUI = new ViewerUI();\n  private graphicsMode: GraphicsMode | null = null;\n  private formIteration: FormIteration | null = null;\n  private source: MMLSourceDefinition | null = null;\n\n  constructor(\n    private windowTarget: Window,\n    private targetForWrappers: HTMLElement,\n  ) {\n    window.addEventListener(\"popstate\", () => {\n      this.handleParams();\n    });\n    this.handleParams();\n  }\n\n  private handleParams() {\n    const queryParamState = new QueryParamState(window.location.search);\n    const formIteration = new FormIteration(queryParamState, this.viewerUI, this.formIteration);\n    this.formIteration = formIteration;\n\n    const url = formIteration.getFieldValue(urlField);\n    const renderer = formIteration.getFieldValue(rendererField);\n    const noUI = parseBoolAttribute(queryParamState.read(\"noUI\"), false);\n    if (noUI) {\n      this.viewerUI.hide();\n    } else {\n      this.viewerUI.show();\n    }\n\n    let source: MMLSourceDefinition;\n    if (url) {\n      source = { url };\n      if (this.source && this.source.url !== url) {\n        if (this.graphicsMode) {\n          this.graphicsMode.dispose();\n          this.graphicsMode = null;\n        }\n      }\n      this.source = source;\n    } else {\n      if (this.graphicsMode) {\n        this.graphicsMode.dispose();\n        this.graphicsMode = null;\n      }\n      this.viewerUI.showAddressMenu();\n      this.formIteration.completed();\n      return;\n    }\n    this.viewerUI.hideAddressMenu();\n\n    if (this.graphicsMode && this.graphicsMode.type !== renderer) {\n      this.graphicsMode.dispose();\n      this.graphicsMode = null;\n    }\n    if (!this.graphicsMode) {\n      if (renderer === \"playcanvas\") {\n        this.graphicsMode = new PlayCanvasMode(\n          this.windowTarget,\n          this.targetForWrappers,\n          source,\n          formIteration,\n        );\n      } else if (renderer === \"threejs\") {\n        this.graphicsMode = new ThreeJSMode(\n          this.windowTarget,\n          this.targetForWrappers,\n          source,\n          formIteration,\n        );\n      } else if (renderer === \"tags\") {\n        this.graphicsMode = new TagsMode(\n          this.windowTarget,\n          this.targetForWrappers,\n          source,\n          formIteration,\n        );\n      }\n    } else {\n      this.graphicsMode.update(formIteration);\n    }\n  }\n}\n", "import { IframeWrapper, registerCustomElementsToWindow } from \"@mml-io/mml-web\";\n\nimport { StandaloneViewer } from \"./StandaloneViewer\";\n\ndeclare global {\n  interface Window {\n    \"mml-viewer\": StandaloneViewer;\n  }\n}\n\nwindow.addEventListener(\"load\", () => {\n  (async () => {\n    const { iframeWindow, iframeBody } = await IframeWrapper.create();\n    const windowTarget = iframeWindow;\n    const targetForWrappers = iframeBody;\n    registerCustomElementsToWindow(windowTarget);\n\n    /*\n     Add a transparent pixel with a backdrop filter to force the background to\n     be white in Chrome (and potentially other browsers). Without this the\n     background is grey unless the menu UI is opened.\n    */\n    const transparentPixel = document.createElement(\"div\");\n    transparentPixel.style.width = \"1px\";\n    transparentPixel.style.height = \"1px\";\n    transparentPixel.style.position = \"absolute\";\n    transparentPixel.style.top = \"1px\";\n    transparentPixel.style.left = \"1px\";\n    transparentPixel.style.userSelect = \"none\";\n    transparentPixel.style.pointerEvents = \"none\";\n    transparentPixel.style.backdropFilter = \"blur(1px)\";\n    document.body.append(transparentPixel);\n\n    const standaloneViewer = new StandaloneViewer(windowTarget, targetForWrappers);\n    window[\"mml-viewer\"] = standaloneViewer;\n  })();\n});\n"],
  "mappings": "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",
  "names": ["input"]
}
