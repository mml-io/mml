<m-plane color="green" width="15" height="15" rx="-90"></m-plane>
<m-light type="spotlight" intensity="900" ry="45" rx="65" rz="-45" x="10" y="10" z="10"></m-light>
<m-cube y="2" id="test-cube" color="red"></m-cube>

<!-- Visibility Test Overlays -->
<m-overlay anchor="top-left" offset-x="10" offset-y="10" id="overlay-top-left">
  <svg width="140" height="50" xmlns="http://www.w3.org/2000/svg">
    <rect x="0" y="0" width="140" height="50" fill="rgba(0,0,0,0.8)" rx="4"/>
    <text x="8" y="18" fill="white" font-family="Arial" font-size="12" font-weight="bold">TOP-LEFT</text>
    <text x="8" y="35" fill="white" font-family="Arial" font-size="10">Static Overlay</text>
  </svg>
</m-overlay>

<m-overlay anchor="top-right" offset-x="-10" offset-y="10" id="overlay-top-right">
  <svg width="140" height="50" xmlns="http://www.w3.org/2000/svg">
    <rect x="0" y="0" width="140" height="50" fill="rgba(0,100,0,0.8)" rx="4"/>
    <text x="8" y="18" fill="white" font-family="Arial" font-size="12" font-weight="bold">TOP-RIGHT</text>
    <text x="8" y="35" fill="white" font-family="Arial" font-size="10">Static Overlay</text>
  </svg>
</m-overlay>

<!-- Interactive Test Overlay -->
<m-overlay anchor="bottom-center" offset-x="0" offset-y="-100" id="overlay-interactive">
  <svg width="200" height="80" xmlns="http://www.w3.org/2000/svg">
    <rect x="0" y="0" width="200" height="80" fill="rgba(100,0,0,0.8)" rx="4"/>
    <text x="100" y="20" fill="white" font-family="Arial" font-size="12" font-weight="bold" text-anchor="middle">INTERACTIVE</text>

    <rect x="60" y="30" width="80" height="25" fill="#444" rx="3" id="color-button" style="cursor: pointer;"/>
    <text x="100" y="47" fill="white" font-family="Arial" font-size="11" text-anchor="middle" style="pointer-events: none;">Change Color</text>

    <text x="100" y="68" fill="white" font-family="Arial" font-size="10" text-anchor="middle" id="status-text">Ready</text>
  </svg>
</m-overlay>

<!-- Dynamic Content Test Overlay -->
<m-overlay anchor="center" offset-x="0" offset-y="0" id="overlay-dynamic">
  <svg width="220" height="120" xmlns="http://www.w3.org/2000/svg">
    <rect x="0" y="0" width="220" height="120" fill="rgba(100,100,0,0.8)" rx="4"/>

    <text x="110" y="18" fill="white" font-family="Arial" font-size="12" font-weight="bold" text-anchor="middle">DYNAMIC Overlay</text>
    <text x="110" y="35" fill="white" font-family="Arial" font-size="10" text-anchor="middle" id="dynamic-content">Base Content</text>

    <rect x="10" y="50" width="60" height="20" fill="#333" rx="2" id="add-button" style="cursor: pointer;"/>
    <text x="40" y="63" fill="white" font-family="Arial" font-size="9" text-anchor="middle" style="pointer-events: none;">Add</text>

    <rect x="80" y="50" width="60" height="20" fill="#333" rx="2" id="modify-button" style="cursor: pointer;"/>
    <text x="110" y="63" fill="white" font-family="Arial" font-size="9" text-anchor="middle" style="pointer-events: none;">Modify</text>

    <rect x="150" y="50" width="60" height="20" fill="#333" rx="2" id="remove-button" style="cursor: pointer;"/>
    <text x="180" y="63" fill="white" font-family="Arial" font-size="9" text-anchor="middle" style="pointer-events: none;">Remove</text>

    <text x="110" y="90" fill="white" font-family="Arial" font-size="9" text-anchor="middle" id="action-status">Ready</text>
  </svg>
</m-overlay>

<script>
  // Interactive functionality for click test
  const colorButton = document.getElementById("color-button");
  const statusText = document.getElementById("status-text");
  const testCube = document.getElementById("test-cube");

  let clickCount = 0;
  const colors = ["red", "blue", "green", "yellow", "purple", "orange"];

  if (colorButton && statusText && testCube) {
    colorButton.addEventListener("click", () => {
      clickCount++;
      const newColor = colors[clickCount % colors.length];
      testCube.setAttribute("color", newColor);
      statusText.textContent = `Color: ${newColor}`;
    });
  }

  // Dynamic content modification functionality
  const addButton = document.getElementById("add-button");
  const modifyButton = document.getElementById("modify-button");
  const removeButton = document.getElementById("remove-button");
  const actionStatus = document.getElementById("action-status");
  const dynamicContent = document.getElementById("dynamic-content");
  const dynamicOverlay = document.getElementById("overlay-dynamic");

  if (addButton && dynamicOverlay) {
    addButton.addEventListener("click", () => {
      const svg = dynamicOverlay.querySelector("svg");
      if (svg && !document.getElementById("added-circle")) {
        // Add a new circle element
        const circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
        circle.setAttribute("cx", "30");
        circle.setAttribute("cy", "100");
        circle.setAttribute("r", "8");
        circle.setAttribute("fill", "cyan");
        circle.setAttribute("id", "added-circle");
        svg.appendChild(circle);

        if (actionStatus) {
          actionStatus.textContent = "Added circle";
        }
      }
    });
  }

  if (modifyButton && dynamicContent) {
    modifyButton.addEventListener("click", () => {
      dynamicContent.textContent = "Modified Content";
      if (actionStatus) {
        actionStatus.textContent = "Modified text";
      }
    });
  }

  if (removeButton) {
    removeButton.addEventListener("click", () => {
      const addedCircle = document.getElementById("added-circle");
      if (addedCircle) {
        addedCircle.remove();
        if (actionStatus) {
          actionStatus.textContent = "Removed circle";
        }
      } else if (actionStatus) {
        actionStatus.textContent = "Nothing to remove";
      }
    });
  }
</script>
